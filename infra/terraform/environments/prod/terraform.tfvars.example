project_id              = "nutrivision-liveagent-2026"
region                  = "europe-west3"
name_prefix             = "nutrivision"
backend_service_name    = "nutrivision-backend"
backend_container_image = "europe-west3-docker.pkg.dev/nutrivision-liveagent-2026/nutrivision-backend/backend:latest"

allow_unauthenticated = true

backend_cpu             = "1"
backend_memory          = "512Mi"
backend_min_instances   = 0
backend_max_instances   = 1
backend_timeout_seconds = 3600
backend_concurrency     = 40

secret_names = [
  "off_user_agent"
]

secret_env_mappings = {
  OFF_USER_AGENT = "off_user_agent"
}

# Do not commit real values.
# Prefer passing these at apply-time:
# Vertex mode default (recommended):
# TF_VAR_secret_payloads='{"off_user_agent":"NutriVisionLive/0.1 (contact: you@example.com)"}'
#
# API-key mode fallback:
# 1) add "gemini_api_key" to secret_names
# 2) add GEMINI_API_KEY = "gemini_api_key" to secret_env_mappings
# 3) set TF_VAR_secret_payloads to include gemini_api_key value
# secret_payloads = {}

backend_env_vars = {
  APP_ENV           = "prod"
  GEMINI_USE_VERTEX = "true"
  GCP_PROJECT_ID    = "nutrivision-liveagent-2026"
  GCP_LOCATION      = "europe-west4"
}

# Optional frontend on Cloud Run:
enable_frontend_cloud_run = false
# frontend_container_image = "europe-west3-docker.pkg.dev/nutrivision-liveagent-2026/nutrivision-backend/frontend:latest"
frontend_env_vars = {
  VITE_BACKEND_WS_URL = "wss://REPLACE_WITH_BACKEND_HOST/ws/live"
}

# Optional monthly budget guardrail:
enable_budget_alerts      = false
monthly_budget_amount_usd = 300
# billing_account_id      = "XXXXXX-XXXXXX-XXXXXX"
budget_alert_thresholds   = [0.5, 0.8, 1.0]
# budget_notification_channels = ["projects/YOUR_PROJECT/notificationChannels/1234567890"]

enable_memorystore        = false
enable_cloud_sql_postgres = false
